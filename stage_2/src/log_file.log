INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:56:15] "[31m[1mGET /dbproj/appointments/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asd@gmail.com', 'password': 'avsdfgc'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:56:22] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'pat1', 'nationality': 'Spanish', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'pat1@gmail.com', 'password': 'pat1'}
ERROR:logger:POST /dbproj/register/patient - error: new row for relation "service_user" violates check constraint "constraint_name"
DETAIL:  Failing row contains (1, pat1, Spanish, 111111111, 1980-01-01, pat1@gmail.com, \xdfa4ac06d61ff6de9990a93b5d7f5da69b180f0ef1c4cd2ffe0634d21269fe...).

INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:56:51] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'pat1@gmail.com', 'password': 'pat1'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:57:09] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'German', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:57:49] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'paton@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:58:01] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: patient
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:58:06] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:59:36] "GET /dbproj/appointments/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:59:41] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Harvard', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:13] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:40] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:44] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:55] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:01:00] "POST /dbproj/appointment HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:01:04] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:01:07] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:07:09] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:07:51] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:11:26] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:12:08] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:12:11] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:05] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 3, role: doctor
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:11] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:14] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/1
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:34] "GET /dbproj/appointments/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:35:30] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:35:53] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:35:59] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:36:02] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 415 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:36:05] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 415 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': 'fate', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - syntax error at or near "RETURUNING"
LINE 4:                     RETURUNING presc_id
                            ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 48, in prescribe_medication
    cur.execute("""
psycopg2.errors.SyntaxError: syntax error at or near "RETURUNING"
LINE 4:                     RETURUNING presc_id
                            ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:37:37] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': 'fate', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - invalid input syntax for type date: "fate"
LINE 3:                     VALUES ('fate')
                                    ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 48, in prescribe_medication
    cur.execute("""
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "fate"
LINE 3:                     VALUES ('fate')
                                    ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:38:33] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - invalid input syntax for type date: "2014"
LINE 3:                     VALUES ('2014')
                                    ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 48, in prescribe_medication
    cur.execute("""
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2014"
LINE 3:                     VALUES ('2014')
                                    ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 97, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:39:32] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'asd'
                                                      ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 57, in prescribe_medication
    cur.execute("""
psycopg2.errors.UndefinedColumn: column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'asd'
                                                      ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 97, in prescribe_medication
    'errors': None,
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:40:22] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'Aspiri...
                                                      ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 57, in prescribe_medication
    cur.execute("""
psycopg2.errors.UndefinedColumn: column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'Aspiri...
                                                      ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 97, in prescribe_medication
    'errors': None,
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:40:35] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - new row for relation "dose" violates check constraint "constraint_2"
DETAIL:  Failing row contains (123, morn, 3, 3).

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 57, in prescribe_medication
    cur.execute("""
psycopg2.errors.CheckViolation: new row for relation "dose" violates check constraint "constraint_2"
DETAIL:  Failing row contains (123, morn, 3, 3).


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:40:59] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:44:54] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:45:58] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:46:07] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:46:37] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 64, in prescribe_medication
    cur.execute("""
psycopg2.errors.ForeignKeyViolation: insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:47:17] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 65, in prescribe_medication
    cur.execute("""
psycopg2.errors.ForeignKeyViolation: insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 86, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 98, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:48:18] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 65, in prescribe_medication
    cur.execute("""
psycopg2.errors.ForeignKeyViolation: insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 86, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 99, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:48:32] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 98, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:49:17] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 109, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:51:02] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 101, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:51:34] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 101, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:51:49] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 102, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:52:03] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 102, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:52:16] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:17] "POST /dbproj/prescription HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:33] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:37] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'French', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:44] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:54] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: insert or update on table "appointment" violates foreign key constraint "appointment_fk4"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(1) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:58] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:31] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:33] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: insert or update on table "appointment" violates foreign key constraint "appointment_fk4"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(1) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:42] "POST /dbproj/appointment HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:45] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: doctor, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:49] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:57] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:02] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'apintment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:20] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:23] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:29] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:55] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'hospitalization', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "hospitalization_prescription" violates foreign key constraint "hospitalization_prescription_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(3) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:00] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:04] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:25] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:50] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:57:02] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:57:32] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:57:50] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:01:38] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointmet', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:01:48] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appoinfment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:01:59] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:10] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:15] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:43] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 400 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'fd'}]}
ERROR:logger:POST /dbproj/prescriptions - new row for relation "dose" violates check constraint "time_of_day_constraint"
DETAIL:  Failing row contains (234, fd, 6, 29).

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:46] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:55] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:03:03] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:26] "GET / HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:35] "[31m[1mGET /dbproj/appointments/1 HTTP/1.1[0m" 401 -
ERROR:rest_api:Exception on /dbproj/user [PUT]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 69, in authenticate_user_endpoint
    return authenticate_user()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 17, in authenticate_user
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:39] "[35m[1mPUT /dbproj/user HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/register/nurse [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 59, in register_nurse_endpoint
    return register_nurse()
           ^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/register_user.py", line 221, in register_nurse
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:47] "[35m[1mPOST /dbproj/register/nurse HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/register/patient [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 49, in register_patient_endpoint
    return register_patient()
           ^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/register_user.py", line 75, in register_patient
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:53] "[35m[1mPOST /dbproj/register/patient HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:rest_api:Exception on /dbproj/register/patient [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 49, in register_patient_endpoint
    return register_patient()
           ^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/register_user.py", line 75, in register_patient
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:41:02] "[35m[1mPOST /dbproj/register/patient HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Spanish', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:41:26] "POST /dbproj/register/patient HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:11] "[31m[1mGET /dbproj/appointments/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asd', 'nationality': 'Spanish', 'phone': '123456789', 'birthday': '1980-01-01', 'email': 'asd@gmail.com', 'password': 'asdfg', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:30] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'Italian', 'phone': '123456789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(123456789) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:43] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:49] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 4, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:51:01] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/4 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(4) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:52:04] "POST /dbproj/surgery/4 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Italian', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:52:58] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:52:59] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Alice', 'nationality': 'Italian', 'phone': '838218895', 'birthday': '1980-01-01', 'email': 'nurse59@gmail.com', 'password': 'Password347', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:02] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Jane', 'nationality': 'French', 'phone': '264376520', 'birthday': '1980-01-01', 'email': 'nurse768@gmail.com', 'password': 'Password510', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:03] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:07] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'Spanish', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:10] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:13] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/4 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(4) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:26] "POST /dbproj/surgery/4 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk3"
DETAIL:  Key (nurse_employee_contract_service_user_user_id)=(5) is not present in table "nurse".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:33] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk2"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(3) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:54:13] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:54:26] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:14] "[33mPOST /dbproj/bills HTTP/1.1[0m" 404 -
ERROR:logger:Insufficient permissions - required: patient, actual: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:18] "POST /dbproj/bills/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:44] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:46] "[31m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 415 -
ERROR:logger:Missing required fields: payment_id, payment_date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:58:34] "POST /dbproj/bills/5 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Portuguese', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:07] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:12] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Italian', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:15] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222222222) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:17] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Italian', 'phone': '168244579', 'birthday': '1980-01-01', 'email': 'nurse287@gmail.com', 'password': 'Password115', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:19] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Italian', 'phone': '349478789', 'birthday': '1980-01-01', 'email': 'nurse282@gmail.com', 'password': 'Password85', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:20] "POST /dbproj/register/nurse HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:29] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:44] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'French', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:48] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 6, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:51] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: column "cost" of relation "bill" does not exist
LINE 1: INSERT INTO bill (cost, is_payed) 
                          ^
QUERY:  INSERT INTO bill (cost, is_payed) 
    VALUES (0, 0) RETURNING bill_id
CONTEXT:  PL/pgSQL function create_hosp_bill_trigger() line 5 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:09:09] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Italian', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:16] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:19] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Harvard', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:21] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Portuguese', 'phone': '715212989', 'birthday': '1980-01-01', 'email': 'nurse465@gmail.com', 'password': 'Password381', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:25] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Spanish', 'phone': '551470036', 'birthday': '1980-01-01', 'email': 'nurse125@gmail.com', 'password': 'Password883', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:25] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:30] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:45] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:58] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: date/time field value out of range: "2023-01-01T024:11:00Z"
LINE 4:                 (app_date BETWEEN '2023-01-01T024:11:00Z'::t...
                                          ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:03] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(2) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:07] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:12] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:40] "POST /dbproj/bills/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:51] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:Missing required fields: payment_id, payment_date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:54] "POST /dbproj/bills/5 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'French', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:23] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Portuguese', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:27] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Spanish', 'phone': '278270174', 'birthday': '1980-01-01', 'email': 'nurse71@gmail.com', 'password': 'Password209', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:28] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Spanish', 'phone': '751952769', 'birthday': '1980-01-01', 'email': 'nurse936@gmail.com', 'password': 'Password665', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:29] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'French', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:31] "POST /dbproj/register/assistant HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:34] "[31m[1mPOST /dbproj/surgery/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(123451789) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:40] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:48] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/1 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(1) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:00:35] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk3"
DETAIL:  Key (nurse_employee_contract_service_user_user_id)=(5) is not present in table "nurse".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:00:39] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk2"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(3) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:01] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:04] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:22] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:25] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:35] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:rest_api:Exception on /dbproj/bills/5 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 106, in pay_bill_endpoint
    return pay_bill(bill_id)
          ^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 50, in pay_bill
    'status': StatusCodes['forbidden'],
              ~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'forbidden'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:02:10] "[35m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/bills/5 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 106, in pay_bill_endpoint
    return pay_bill(bill_id)
          ^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 50, in pay_bill
    'status': StatusCodes['forbidden'],
              ~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'forbidden'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:02:17] "[35m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:rest_api:Exception on /dbproj/bills/5 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 106, in pay_bill_endpoint
    return pay_bill(bill_id)
          ^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 53, in pay_bill
    'status': StatusCodes['forbidden'],
              ~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'forbidden'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:03:16] "[35m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:09:46] "POST /dbproj/bills/5 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/5 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:11:35] "POST /dbproj/bills/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "bill_bill" of relation "payment" does not exist
LINE 2:                     INSERT INTO payment (bill_bill, amount, ...
                                                 ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:11:48] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: record "new" has no field "bill_id"
CONTEXT:  SQL statement "UPDATE bill
    SET already_payed = already_payed + NEW.payment
    WHERE bill_id = NEW.bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:15:24] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "bill_bill_id" does not exist
LINE 3:     WHERE bill_bill_id = NEW.bill_bill_id
                  ^
QUERY:  UPDATE bill
    SET already_payed = already_payed + NEW.payment
    WHERE bill_bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:19:46] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: record "new" has no field "payment"
CONTEXT:  SQL statement "UPDATE bill
    SET already_payed = already_payed + NEW.payment
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:20:04] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "remaining_cost" does not exist
LINE 2:                     SELECT remaining_cost 
                                   ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:20:39] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:                     SELECT (total_cost - already_paid) as re...
                                                 ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:21:35] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:                     SELECT (total_cost - already_paid) as re...
                                                 ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:22:04] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column bill.already_paid does not exist
LINE 2:                     SELECT (bill.total_cost - bill.already_p...
                                                      ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:22:09] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:     SET already_paid = already_paid + NEW.payment_id
                               ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".
QUERY:  UPDATE bill
    SET already_paid = already_paid + NEW.payment_id
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:23:08] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:     SET already_paid = already_paid + NEW.amount
                               ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".
QUERY:  UPDATE bill
    SET already_paid = already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:24:06] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:24:55] "GET / HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column bill.already_paid does not exist
LINE 2:     SET bill.already_paid = bill.already_paid + NEW.amount
                                    ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".
QUERY:  UPDATE bill
    SET bill.already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:24:59] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/3 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:22] "POST /dbproj/bills/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Portuguese', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:31] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:37] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Alice', 'nationality': 'Italian', 'phone': '614922325', 'birthday': '1980-01-01', 'email': 'nurse56@gmail.com', 'password': 'Password567', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:39] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Portuguese', 'phone': '789161743', 'birthday': '1980-01-01', 'email': 'nurse614@gmail.com', 'password': 'Password616', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '1'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:40] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:42] "POST /dbproj/register/assistant HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: assistant, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:51] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:59] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/3 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(3) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:08] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:17] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/3 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:20] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:33] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:37] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:30:28] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/3 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:30:32] "POST /dbproj/bills/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "bill" of relation "bill" does not exist
LINE 2:     SET bill.already_paid = bill.already_paid + NEW.amount
                ^
QUERY:  UPDATE bill
    SET bill.already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:30:38] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:31:36] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/2 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:31:41] "POST /dbproj/bills/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: duplicate key value violates unique constraint "payment_pkey"
DETAIL:  Key (bill_bill_id)=(1) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:31:57] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'German', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:34:40] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:34:44] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:34:54] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:35:07] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 50, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: new row for relation "bill" violates check constraint "excessive_payment"
DETAIL:  Failing row contains (1, 50, 51).
CONTEXT:  SQL statement "UPDATE bill
    SET already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:35:20] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 50, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: new row for relation "bill" violates check constraint "excessive_payment"
DETAIL:  Failing row contains (1, 50, 51).
CONTEXT:  SQL statement "UPDATE bill
    SET already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:13] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 20, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:22] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 29, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:27] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 0, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: new row for relation "payment" violates check constraint "constraint_0"
DETAIL:  Failing row contains (6, 0, mbway, 1).

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:30] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:58:12] "[33mGET /dbproj/2 HTTP/1.1[0m" 404 -
DEBUG:logger:GET /dbproj/prescriptions/1
ERROR:logger:missing FROM-clause entry for table "p"
LINE 4:                     JOIN dose d ON p.presc_id = d.prescripti...
                                           ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:58:23] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:01] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/2
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:09] "GET /dbproj/prescriptions/2 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:13] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:54] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(3) is not present in table "appointment".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:00:00] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:00:05] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:00:11] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:30:49] "[31m[1mGET /dbproj/prescriptions/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:30:58] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:31:16] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
ERROR:logger:column p.presc_ud does not exist
LINE 11:                     GROUP BY p.presc_ud, p.validity
                                      ^
HINT:  Perhaps you meant to reference the column "p.presc_id".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:31:19] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
ERROR:logger:column "d.amount" must appear in the GROUP BY clause or be used in an aggregate function
LINE 2: ...SELECT p.presc_id AS prescription_id, p.validity, d.amount, ...
                                                             ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:33:02] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:44:55] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:47:49] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:48:46] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:48:49] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:48:53] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Morphine', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:49:32] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:49:41] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:59:13] "[33mGET /dbproj/top3 HTTP/1.1[0m" 404 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:40:04] "[31m[1mGET /dbproj/top3 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:40:28] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'Italian', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:40:33] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 3, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:40:37] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:rest_api:Exception on /dbproj/top3 [GET]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 112, in top3_endpoint
    return top3()
           ^^^^
NameError: name 'top3' is not defined
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:40:41] "[35m[1mGET /dbproj/top3 HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/top3 [GET]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 112, in top3_endpoint
    return top3()
           ^^^^
NameError: name 'top3' is not defined
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:40:47] "[35m[1mGET /dbproj/top3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:41:19] "GET /dbproj/top3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:41:57] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'pattwo', 'nationality': 'Italian', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'pattone@gmail.com', 'password': 'pattwo'}
ERROR:logger:POST /dbproj/register/patient - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(111111111) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:42:19] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'pattwo', 'nationality': 'Portuguese', 'phone': '111711111', 'birthday': '1980-01-01', 'email': 'pattone@gmail.com', 'password': 'pattwo'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:42:25] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:42:28] "GET /dbproj/top3 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/1 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(1) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:43:00] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk3"
DETAIL:  Key (nurse_employee_contract_service_user_user_id)=(3) is not present in table "nurse".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:43:08] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'German', 'phone': '250161281', 'birthday': '1980-01-01', 'email': 'nurse22@gmail.com', 'password': 'Password589', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:43:21] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Charlie', 'nationality': 'Portuguese', 'phone': '156865496', 'birthday': '1980-01-01', 'email': 'nurse929@gmail.com', 'password': 'Password323', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:43:22] "POST /dbproj/register/nurse HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:44:00] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:44:08] "GET /dbproj/top3 HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:44:24] "POST /dbproj/bills/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'pattwo@gmail.com', 'password': 'pattwo'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:44:39] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'pattwo'}
ERROR:logger:Invalid password was provided
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:44:56] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:04] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'pattone@gmail.com', 'password': 'patwo'}
ERROR:logger:Invalid password was provided
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:25] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'pattone@gmail.com', 'password': 'pattwo'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:29] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/3 - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:33] "POST /dbproj/bills/3 HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: assistant, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:42] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 3, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:51] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:45:54] "GET /dbproj/top3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:46:57] "GET /dbproj/top3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/top3
ERROR:logger:GET /dbproj/top3 syntax error at or near "ORDER"
LINE 25: ORDER BY tp.total_paid DESC;
         ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:49:13] "GET /dbproj/top3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [23/May/2024 18:49:27] "GET /dbproj/top3 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:03:01] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:03:06] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:logger:POST /dbproj/surgery/2 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:05:49] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:05:53] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:05:58] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'pattwo', 'nationality': 'French', 'phone': '111711111', 'birthday': '1980-01-01', 'email': 'pattone@gmail.com', 'password': 'pattwo'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:18:31] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Stanford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:20:59] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:05] "[31m[1mPOST /dbproj/appointment HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:13] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patoneREAL', 'nationality': 'Spanish', 'phone': '111711111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
ERROR:logger:POST /dbproj/register/patient - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(111711111) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:29] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patoneREAL', 'nationality': 'Spanish', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:36] "POST /dbproj/register/patient HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:41] "[31m[1mPOST /dbproj/appointment HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 4, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:43] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:47] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/3 - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/3 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:21:54] "POST /dbproj/bills/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/1 - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:22:05] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:logger:Insufficient permissions - required: assistant, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:31:39] "GET /dbproj/daily/2024-05-23 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:31:44] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:31:54] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /daily_summary/2024-05-23
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:31:58] "GET /dbproj/daily/2024-05-23 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:15] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk2"
DETAIL:  Key (patient_service_user_user_id)=(5) is not present in table "patient".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:19] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk3"
DETAIL:  Key (nurse_employee_contract_service_user_user_id)=(6) is not present in table "nurse".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:24] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:39] "[31m[1mPOST /dbproj/surgery HTTP/1.1[0m" 400 -
ERROR:logger:Missing required fields: nurses
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:43] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:51] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Bob', 'nationality': 'French', 'phone': '102001470', 'birthday': '1980-01-01', 'email': 'nurse294@gmail.com', 'password': 'Password203', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:59] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Italian', 'phone': '251239803', 'birthday': '1980-01-01', 'email': 'nurse555@gmail.com', 'password': 'Password95', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:32:59] "POST /dbproj/register/nurse HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:33:03] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:GET /daily_summary/2023-02-01
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:33:24] "GET /dbproj/daily/2023-02-01 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 4, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:36:09] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/1 - payload: {'amount': 4, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:36:47] "POST /dbproj/bills/1 HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: assistant, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:37:05] "GET /dbproj/daily/2023-23-05 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:37:14] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /daily_summary/2023-23-05
ERROR:logger:GET /daily_summary/2023-23-05 - date/time field value out of range: "2023-23-05"

INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:37:17] "GET /dbproj/daily/2023-23-05 HTTP/1.1" 200 -
DEBUG:logger:GET /daily_summary/2023-05-23
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:37:25] "GET /dbproj/daily/2023-05-23 HTTP/1.1" 200 -
DEBUG:logger:GET /daily_summary/2024-05-23
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:37:44] "GET /dbproj/daily/2024-05-23 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:46:55] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:47:05] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:rest_api:Exception on /dbproj/report [GET]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 130, in monthly_report_endpoint
    return monthly_report()
           ^^^^^^^^^^^^^^^^
TypeError: monthly_report() missing 1 required positional argument: 'date_str'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:47:08] "[35m[1mGET /dbproj/report HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:rest_api:Exception on /dbproj/report [GET]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 130, in monthly_report_endpoint
    return monthly_report()
           ^^^^^^^^^^^^^^^^
TypeError: monthly_report() missing 1 required positional argument: 'date_str'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 19:47:20] "[35m[1mGET /dbproj/report HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:33:03] "[33mPOST /dbproj/surgery2 HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:33:07] "[31m[1mPOST /dbproj/surgery HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:33:09] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:33:10] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:Missing required fields: nurses
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:34:03] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 129, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 274, in schedule_surgery
    if payload['nurses'] is not None:
       ~~~~~~~^^^^^^^^^^
KeyError: 'nurses'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:34:09] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 129, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 274, in schedule_surgery
    if payload['nurses'] is not None:
       ~~~~~~~^^^^^^^^^^
KeyError: 'nurses'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:34:23] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 129, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 276, in schedule_surgery
    if payload['nurses'] is not None:
       ~~~~~~~^^^^^^^^^^
KeyError: 'nurses'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:35:10] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 131, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 276, in schedule_surgery
    if payload['nurses'] is not None:
       ~~~~~~~^^^^^^^^^^
KeyError: 'nurses'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:35:49] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 128, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 281, in schedule_surgery
    if payload['nurses'] is not None:
       ~~~~~~~^^^^^^^^^^
KeyError: 'nurses'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:36:28] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 128, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 278, in schedule_surgery
    if payload['nurses'] is not None:
       ~~~~~~~^^^^^^^^^^
KeyError: 'nurses'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:36:54] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:rest_api:Exception on /dbproj/surgery/3 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 128, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in schedule_surgery_endpoint
    return schedule_surgery(hospitalization_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/scheduling.py", line 283, in schedule_surgery
    if check_nurse_fields(nurses) == False or len(nurses) == 0:
                          ^^^^^^
UnboundLocalError: cannot access local variable 'nurses' where it is not associated with a value
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:39:23] "[35m[1mPOST /dbproj/surgery/3 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:logger:POST /dbproj/surgery/3 - error: cannot access local variable 'nurses' where it is not associated with a value
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:39:47] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:logger:POST /dbproj/surgery/3 - error: cannot access local variable 'nurses' where it is not associated with a value
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:40:35] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
ERROR:logger:POST /dbproj/surgery/3 - error: 'NoneType' object is not iterable
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:40:38] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-01T014:11:00Z', 'type': 'divertida'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:40:51] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/None - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-11T014:11:00Z', 'type': 'divertida'}
ERROR:logger:Missing required fields: nurses
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:41:01] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-11T014:11:00Z', 'type': 'divertida'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:41:06] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-01-11T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
ERROR:logger:POST /dbproj/surgery/3 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:43:22] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 2, 'date': '2023-11-11T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:43:26] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Cambridge', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222222222) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:44:15] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'dotwo', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'doctwo@gmail.com', 'password': 'doctwo', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222222222) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:44:26] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'dotwo', 'nationality': 'Italian', 'phone': '222221222', 'birthday': '1980-01-01', 'email': 'doctwo@gmail.com', 'password': 'doctwo', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:44:31] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:GET /report
ERROR:logger:GET /report - [Errno 2] No such file or directory: 'queries/report.sql'
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:44:52] "GET /dbproj/report HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /report
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:45:23] "GET /dbproj/report HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-10-11T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:46:52] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-10-11T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
ERROR:logger:POST /dbproj/surgery/3 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:46:53] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-10-12T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:46:58] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-10-15T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:02] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:GET /report
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:18] "GET /dbproj/report HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-08-15T014:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:38] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-08-15T012:11:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
ERROR:logger:POST /dbproj/surgery/3 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:46] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-08-15T012:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:50] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 1, 'doctor': 10, 'date': '2023-08-15T017:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:54] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:GET /report
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:47:56] "GET /dbproj/report HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /report
INFO:werkzeug:127.0.0.1 - - [24/May/2024 16:58:56] "GET /dbproj/report HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:07:02] "[31m[1mGET /dbproj/report HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:07:09] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /report
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:07:11] "GET /dbproj/report HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /report
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:10:12] "GET /dbproj/report HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:21:51] "[31m[1mGET /dbproj/appointment HTTP/1.1[0m" 405 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:21:51] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:22:04] "[31m[1mGET /dbproj/top3 HTTP/1.1[0m" 401 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:22:12] "GET /dbproj/top3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:22:34] "[31m[1mGET /dbproj/user HTTP/1.1[0m" 405 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:22:57] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:23:00] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:23:03] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:23:10] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patoneREAL', 'nationality': 'French', 'phone': '111211111', 'birthday': '1980-01-01', 'email': 'pattwo@gmail.com', 'password': 'pattwo'}
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:25:02] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'pattwo', 'nationality': 'Portuguese', 'phone': '111211111', 'birthday': '1980-01-01', 'email': 'pattwo@gmail.com', 'password': 'pattwo'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:25:14] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patthree', 'nationality': 'Italian', 'phone': '111211111', 'birthday': '1980-01-01', 'email': 'patthree@gmail.com', 'password': 'patthree'}
ERROR:logger:POST /dbproj/register/patient - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(111211111) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:25:26] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patthree', 'nationality': 'French', 'phone': '111311111', 'birthday': '1980-01-01', 'email': 'patthree@gmail.com', 'password': 'patthree'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:25:32] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:25:36] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'pattwo@gmail.com', 'password': 'pattwo'}
DEBUG:logger:POST /dbproj/user - user_id: 11, role: patient
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:25:59] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:27:35] "POST /dbproj/appointment HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:27:39] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:27:45] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:rest_api:Exception on /dbproj/bills/6 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 135, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 112, in execute_payment_endpoint
    return execute_payment(bill_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 16, in execute_payment
    if(payload_contains_dangerous_chars(payload)):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 109, in payload_contains_dangerous_chars
    if string_contains_dangerous_chars(value):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 102, in string_contains_dangerous_chars
    if char in input_str:
       ^^^^^^^^^^^^^^^^^
TypeError: argument of type 'int' is not iterable
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:28:10] "[35m[1mPOST /dbproj/bills/6 HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/bills/6 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 135, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 112, in execute_payment_endpoint
    return execute_payment(bill_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 16, in execute_payment
    if(payload_contains_dangerous_chars(payload)):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 109, in payload_contains_dangerous_chars
    if string_contains_dangerous_chars(value):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 102, in string_contains_dangerous_chars
    if char in input_str:
       ^^^^^^^^^^^^^^^^^
TypeError: argument of type 'int' is not iterable
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:28:23] "[35m[1mPOST /dbproj/bills/6 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:rest_api:Exception on /dbproj/bills/6 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 135, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 112, in execute_payment_endpoint
    return execute_payment(bill_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 20, in execute_payment
    if(payload_contains_dangerous_chars(payload)):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 109, in payload_contains_dangerous_chars
    if string_contains_dangerous_chars(value):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 102, in string_contains_dangerous_chars
    if char in input_str:
       ^^^^^^^^^^^^^^^^^
TypeError: argument of type 'int' is not iterable
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:30:23] "[35m[1mPOST /dbproj/bills/6 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:rest_api:Exception on /dbproj/bills/6 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 135, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 112, in execute_payment_endpoint
    return execute_payment(bill_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 18, in execute_payment
    if(payload_contains_dangerous_chars(payload)):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 109, in payload_contains_dangerous_chars
    if string_contains_dangerous_chars(value):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 102, in string_contains_dangerous_chars
    if char in input_str:
       ^^^^^^^^^^^^^^^^^
TypeError: argument of type 'int' is not iterable
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:30:56] "[35m[1mPOST /dbproj/bills/6 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/6 - payload: {'amount': 4, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:31:13] "POST /dbproj/bills/6 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/6 - payload: {'amount': 4, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:32:18] "POST /dbproj/bills/6 HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: assistant, actual: patient
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:32:29] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:32:41] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:32:45] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 13, 'doctor': 10, 'date': '2023-08-15T017:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
ERROR:logger:POST /dbproj/surgery/3 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:33:36] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/3 - payload: {'patient_id': 13, 'doctor': 10, 'date': '2023-01-15T017:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:33:40] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/None - payload: {'patient_id': 13, 'doctor': 10, 'date': '2023-01-15T017:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:33:45] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:33:58] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patthree@gmail.com', 'password': 'patthree'}
DEBUG:logger:POST /dbproj/user - user_id: 13, role: patient
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:34:14] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/7 - payload: {'amount': 4, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:34:30] "POST /dbproj/bills/7 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patfour', 'nationality': 'German', 'phone': '111311111', 'birthday': '1980-01-01', 'email': 'patfour@gmail.com', 'password': 'patfour'}
ERROR:logger:POST /dbproj/register/patient - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(111311111) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:34:56] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patfour@gmail.com', 'password': 'patfour'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:34:59] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patfour', 'nationality': 'Italian', 'phone': '111311611', 'birthday': '1980-01-01', 'email': 'patfour@gmail.com', 'password': 'patfour'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:35:41] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patfour@gmail.com', 'password': 'patfour'}
DEBUG:logger:POST /dbproj/user - user_id: 15, role: patient
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:35:44] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:35:54] "POST /dbproj/appointment HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:36:05] "POST /dbproj/bills/8 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/8 - payload: {'amount': 60, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/8 - error: new row for relation "bill" violates check constraint "excessive_payment"
DETAIL:  Failing row contains (8, 50, 60).
CONTEXT:  SQL statement "UPDATE bill
    SET already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:36:08] "POST /dbproj/bills/8 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/8 - payload: {'amount': 50, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:36:12] "POST /dbproj/bills/8 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:36:36] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:36:43] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/5 - payload: {'patient_id': 13, 'doctor': 10, 'date': '2023-01-15T017:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
ERROR:logger:POST /dbproj/surgery/5 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:37:15] "POST /dbproj/surgery/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/5 - payload: {'patient_id': 13, 'doctor': 10, 'date': '2023-01-15T020:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:37:24] "POST /dbproj/surgery/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/5 - payload: {'patient_id': 13, 'doctor': 10, 'date': '2023-01-15T020:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
ERROR:logger:POST /dbproj/surgery/5 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:37:31] "POST /dbproj/surgery/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/5 - payload: {'patient_id': 13, 'doctor': 10, 'date': '2013-01-15T020:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:37:38] "POST /dbproj/surgery/5 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:37:41] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patthree@gmail.com', 'password': 'patthree'}
DEBUG:logger:POST /dbproj/user - user_id: 13, role: patient
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:38:21] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/7 - payload: {'amount': 50, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:38:26] "POST /dbproj/bills/7 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/7 - payload: {'amount': 50, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:38:32] "POST /dbproj/bills/7 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:38:39] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:38:42] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:38:47] "GET /dbproj/top3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/surgery/None - payload: {'patient_id': 13, 'doctor': 10, 'date': '2011-01-15T020:10:00Z', 'type': 'divertida', 'nurses': [{'nurse_id': '6', 'role': 'Euthanasist'}, {'nurse_id': '7', 'role': 'Preoperative'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:43:15] "POST /dbproj/surgery HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/top3
INFO:werkzeug:127.0.0.1 - - [24/May/2024 17:43:18] "GET /dbproj/top3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'patfour', 'nationality': 'Portuguese', 'phone': '111311611', 'birthday': '1980-01-01', 'email': 'patfour@gmail.com', 'password': 'patfour'}
ERROR:logger:POST /dbproj/register/patient - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(111311611) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:20:46] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'patfive', 'nationality': 'Italian', 'phone': '111111611', 'birthday': '1980-01-01', 'email': 'patfive@gmail.com', 'password': 'patfive'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:20:59] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'astwo', 'nationality': 'Portuguese', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'astwo@gmail.com', 'password': 'astwo', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(123451789) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:23:19] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'astwo', 'nationality': 'French', 'phone': '123451719', 'birthday': '1980-01-01', 'email': 'astwo@gmail.com', 'password': 'astwo', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: tuple index out of range
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:23:25] "POST /dbproj/register/assistant HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'Bob', 'nationality': 'Portuguese', 'phone': '638025584', 'birthday': '1980-01-01', 'email': 'nurse710@gmail.com', 'password': 'Password399', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '1'}
ERROR:logger:POST /dbproj/register/nurse - error: invalid input syntax for type bigint: "2022-01-01"
LINE 3:                 VALUES ('2022-01-01', '2022-01-01', '2023-01...
                                ^

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:24:35] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'astwo', 'nationality': 'Italian', 'phone': '123451719', 'birthday': '1980-01-01', 'email': 'astwo@gmail.com', 'password': 'astwo', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: invalid input syntax for type bigint: "2022-01-01"
LINE 3:                 VALUES ('2022-01-01', '2022-01-01', '2023-01...
                                ^

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:24:41] "POST /dbproj/register/assistant HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'astwo', 'nationality': 'Italian', 'phone': '123451719', 'birthday': '1980-01-01', 'email': 'astwo@gmail.com', 'password': 'astwo', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:25:25] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'Jane', 'nationality': 'Spanish', 'phone': '328729059', 'birthday': '1980-01-01', 'email': 'nurse357@gmail.com', 'password': 'Password533', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:25:39] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Stanford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222222222) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:25:53] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222122222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_email_key"
DETAIL:  Key (email)=(docone@gmail.com) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:25:57] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docone', 'nationality': 'Italian', 'phone': '222522222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_email_key"
DETAIL:  Key (email)=(docone@gmail.com) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:26:01] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docsix', 'nationality': 'Portuguese', 'phone': '222522222', 'birthday': '1980-01-01', 'email': 'docsix@gmail.com', 'password': 'docsix', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Cambridge', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:26:11] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'French', 'phone': '2225221122', 'birthday': '1980-01-01', 'email': 'docseven@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Harvard', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: value "2225221122" is out of range for type integer
LINE 3:                 VALUES ('docseven', 'French', '2225221122', ...
                                                      ^

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:28:00] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'French', 'phone': '222522112', 'birthday': '1980-01-01', 'email': 'docseven@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Stanford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:28:06] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'French', 'phone': '222522112', 'birthday': '1980-01-01', 'email': 'docseven@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Stanford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222522112) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:29:49] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'Italian', 'phone': '222522112', 'birthday': '1980-01-01', 'email': 'doc1@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222522112) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:29:58] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'Portuguese', 'phone': '222512112', 'birthday': '1980-01-01', 'email': 'doc1@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Stanford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:30:00] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'French', 'phone': '262512112', 'birthday': '1980-01-01', 'email': 'doc6@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:30:09] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'Italian', 'phone': '262512112', 'birthday': '1980-01-01', 'email': 'doc6@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Harvard', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(262512112) already exists.

INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:30:33] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'name': 'docseven', 'nationality': 'Spanish', 'phone': '262511112', 'birthday': '1980-01-01', 'email': 'do111@gmail.com', 'password': 'docseven', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Stanford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 18:30:43] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [24/May/2024 19:49:02] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [24/May/2024 19:49:12] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Morphine', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [24/May/2024 19:49:20] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [24/May/2024 19:49:25] "POST /dbproj/prescription HTTP/1.1" 200 -
