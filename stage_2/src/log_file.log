INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:56:15] "[31m[1mGET /dbproj/appointments/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asd@gmail.com', 'password': 'avsdfgc'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:56:22] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'pat1', 'nationality': 'Spanish', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'pat1@gmail.com', 'password': 'pat1'}
ERROR:logger:POST /dbproj/register/patient - error: new row for relation "service_user" violates check constraint "constraint_name"
DETAIL:  Failing row contains (1, pat1, Spanish, 111111111, 1980-01-01, pat1@gmail.com, \xdfa4ac06d61ff6de9990a93b5d7f5da69b180f0ef1c4cd2ffe0634d21269fe...).

INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:56:51] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'pat1@gmail.com', 'password': 'pat1'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:57:09] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'German', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:57:49] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'paton@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:58:01] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: patient
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:58:06] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:59:36] "GET /dbproj/appointments/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 21:59:41] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Harvard', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:13] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:40] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:44] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:00:55] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:01:00] "POST /dbproj/appointment HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:01:04] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:01:07] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:07:09] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:07:51] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:11:26] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:12:08] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:12:11] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:05] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 3, role: doctor
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:11] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/2
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:14] "GET /dbproj/appointments/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/appointments/1
INFO:werkzeug:127.0.0.1 - - [22/May/2024 22:13:34] "GET /dbproj/appointments/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:35:30] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:35:53] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:35:59] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:36:02] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 415 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:36:05] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 415 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': 'fate', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - syntax error at or near "RETURUNING"
LINE 4:                     RETURUNING presc_id
                            ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 48, in prescribe_medication
    cur.execute("""
psycopg2.errors.SyntaxError: syntax error at or near "RETURUNING"
LINE 4:                     RETURUNING presc_id
                            ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:37:37] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': 'fate', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - invalid input syntax for type date: "fate"
LINE 3:                     VALUES ('fate')
                                    ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 48, in prescribe_medication
    cur.execute("""
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "fate"
LINE 3:                     VALUES ('fate')
                                    ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:38:33] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - invalid input syntax for type date: "2014"
LINE 3:                     VALUES ('2014')
                                    ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 48, in prescribe_medication
    cur.execute("""
psycopg2.errors.InvalidDatetimeFormat: invalid input syntax for type date: "2014"
LINE 3:                     VALUES ('2014')
                                    ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 97, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:39:32] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'asd', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'asd'
                                                      ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 57, in prescribe_medication
    cur.execute("""
psycopg2.errors.UndefinedColumn: column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'asd'
                                                      ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 97, in prescribe_medication
    'errors': None,
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:40:22] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'Aspiri...
                                                      ^

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 57, in prescribe_medication
    cur.execute("""
psycopg2.errors.UndefinedColumn: column "name" does not exist
LINE 4:                         FROM medication WHERE name = 'Aspiri...
                                                      ^


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 97, in prescribe_medication
    'errors': None,
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:40:35] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_time_of_day': 'morn'}]}
ERROR:logger:POST /dbproj/prescriptions - new row for relation "dose" violates check constraint "constraint_2"
DETAIL:  Failing row contains (123, morn, 3, 3).

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 57, in prescribe_medication
    cur.execute("""
psycopg2.errors.CheckViolation: new row for relation "dose" violates check constraint "constraint_2"
DETAIL:  Failing row contains (123, morn, 3, 3).


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:40:59] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:44:54] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:45:58] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:46:07] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'o', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:46:37] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 64, in prescribe_medication
    cur.execute("""
psycopg2.errors.ForeignKeyViolation: insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 84, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 96, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:47:17] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 65, in prescribe_medication
    cur.execute("""
psycopg2.errors.ForeignKeyViolation: insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 86, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 98, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:48:18] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 65, in prescribe_medication
    cur.execute("""
psycopg2.errors.ForeignKeyViolation: insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".


During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 86, in prescribe_medication
    'status': StatusCodes['internal_server_error'],
KeyError: 'internal_server_error'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 99, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:48:32] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 98, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:49:17] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 109, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:51:02] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 101, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:51:34] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 101, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:51:49] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 102, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:52:03] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

ERROR:rest_api:Exception on /dbproj/prescription [POST]
Traceback (most recent call last):
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 1463, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 872, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/nuno/.local/lib/python3.10/site-packages/flask/app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "/home/nuno/.local/lib/python3.10/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 94, in prescribe_medication_endpoint
    return prescribe_medication()
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/prescriptions.py", line 102, in prescribe_medication
    'status': StatusCodes['created'],
KeyError: 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:52:16] "[35m[1mPOST /dbproj/prescription HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:17] "POST /dbproj/prescription HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:33] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:37] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'French', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:44] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:54] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: insert or update on table "appointment" violates foreign key constraint "appointment_fk4"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(1) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:53:58] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:31] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:33] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/appointment - error: insert or update on table "appointment" violates foreign key constraint "appointment_fk4"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(1) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:42] "POST /dbproj/appointment HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:45] "POST /dbproj/appointment HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: doctor, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:49] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:54:57] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(1) is not present in table "appointment".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:02] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'apintment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:20] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:23] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:29] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:55:55] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'hospitalization', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "hospitalization_prescription" violates foreign key constraint "hospitalization_prescription_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(3) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:00] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:04] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:25] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:56:50] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:57:02] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
ERROR:logger:POST /dbproj/prescriptions - 'created'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:57:32] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 12:57:50] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:01:38] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointmet', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:01:48] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appoinfment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:01:59] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:10] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:15] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:43] "[31m[1mPOST /dbproj/prescription HTTP/1.1[0m" 400 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'fd'}]}
ERROR:logger:POST /dbproj/prescriptions - new row for relation "dose" violates check constraint "time_of_day_constraint"
DETAIL:  Failing row contains (234, fd, 6, 29).

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:46] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointfent', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:02:55] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:03:03] "POST /dbproj/prescription HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:26] "GET / HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:26] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:35] "[31m[1mGET /dbproj/appointments/1 HTTP/1.1[0m" 401 -
ERROR:rest_api:Exception on /dbproj/user [PUT]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 69, in authenticate_user_endpoint
    return authenticate_user()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 17, in authenticate_user
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:39] "[35m[1mPUT /dbproj/user HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/register/nurse [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 59, in register_nurse_endpoint
    return register_nurse()
           ^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/register_user.py", line 221, in register_nurse
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:47] "[35m[1mPOST /dbproj/register/nurse HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/register/patient [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 49, in register_patient_endpoint
    return register_patient()
           ^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/register_user.py", line 75, in register_patient
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:40:53] "[35m[1mPOST /dbproj/register/patient HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
ERROR:rest_api:Exception on /dbproj/register/patient [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 49, in register_patient_endpoint
    return register_patient()
           ^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/register_user.py", line 75, in register_patient
    conn = db_connection()
           ^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/global_functions.py", line 30, in db_connection
    db = psycopg2.connect(
         ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/psycopg2/__init__.py", line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.OperationalError: connection to server at "127.0.0.1", port 5432 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:41:02] "[35m[1mPOST /dbproj/register/patient HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Spanish', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:41:26] "POST /dbproj/register/patient HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:11] "[31m[1mGET /dbproj/appointments/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asd', 'nationality': 'Spanish', 'phone': '123456789', 'birthday': '1980-01-01', 'email': 'asd@gmail.com', 'password': 'asdfg', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:30] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'Italian', 'phone': '123456789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(123456789) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:43] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:50:49] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 4, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:51:01] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/4 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(4) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:52:04] "POST /dbproj/surgery/4 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Italian', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:52:58] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:52:59] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Alice', 'nationality': 'Italian', 'phone': '838218895', 'birthday': '1980-01-01', 'email': 'nurse59@gmail.com', 'password': 'Password347', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:02] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Jane', 'nationality': 'French', 'phone': '264376520', 'birthday': '1980-01-01', 'email': 'nurse768@gmail.com', 'password': 'Password510', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:03] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:07] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'Spanish', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:10] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:13] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/4 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(4) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:26] "POST /dbproj/surgery/4 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk3"
DETAIL:  Key (nurse_employee_contract_service_user_user_id)=(5) is not present in table "nurse".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:53:33] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk2"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(3) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:54:13] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:54:26] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:14] "[33mPOST /dbproj/bills HTTP/1.1[0m" 404 -
ERROR:logger:Insufficient permissions - required: patient, actual: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:18] "POST /dbproj/bills/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:44] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:57:46] "[31m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 415 -
ERROR:logger:Missing required fields: payment_id, payment_date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 13:58:34] "POST /dbproj/bills/5 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Portuguese', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:07] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:12] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Italian', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:15] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
ERROR:logger:POST /dbproj/register/doctor - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(222222222) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:17] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Italian', 'phone': '168244579', 'birthday': '1980-01-01', 'email': 'nurse287@gmail.com', 'password': 'Password115', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:19] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Italian', 'phone': '349478789', 'birthday': '1980-01-01', 'email': 'nurse282@gmail.com', 'password': 'Password85', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:20] "POST /dbproj/register/nurse HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:29] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:44] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'French', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:48] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 6, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:08:51] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: column "cost" of relation "bill" does not exist
LINE 1: INSERT INTO bill (cost, is_payed) 
                          ^
QUERY:  INSERT INTO bill (cost, is_payed) 
    VALUES (0, 0) RETURNING bill_id
CONTEXT:  PL/pgSQL function create_hosp_bill_trigger() line 5 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:09:09] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Italian', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:16] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:19] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Spanish', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Harvard', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:21] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Portuguese', 'phone': '715212989', 'birthday': '1980-01-01', 'email': 'nurse465@gmail.com', 'password': 'Password381', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:25] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Spanish', 'phone': '551470036', 'birthday': '1980-01-01', 'email': 'nurse125@gmail.com', 'password': 'Password883', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:25] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:30] "PUT /dbproj/user HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:45] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:10:58] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: date/time field value out of range: "2023-01-01T024:11:00Z"
LINE 4:                 (app_date BETWEEN '2023-01-01T024:11:00Z'::t...
                                          ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:03] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(2) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:07] "POST /dbproj/surgery/2 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:12] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: patient, actual: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:40] "POST /dbproj/bills/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:51] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:Missing required fields: payment_id, payment_date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:11:54] "POST /dbproj/bills/5 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'French', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:23] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'Portuguese', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:27] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'John', 'nationality': 'Spanish', 'phone': '278270174', 'birthday': '1980-01-01', 'email': 'nurse71@gmail.com', 'password': 'Password209', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:28] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Spanish', 'phone': '751952769', 'birthday': '1980-01-01', 'email': 'nurse936@gmail.com', 'password': 'Password665', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '2'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:29] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'French', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:31] "POST /dbproj/register/assistant HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:34] "[31m[1mPOST /dbproj/surgery/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
ERROR:logger:POST /dbproj/register/assistant - error: duplicate key value violates unique constraint "service_user_phone_key"
DETAIL:  Key (phone)=(123451789) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:40] "POST /dbproj/register/assistant HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 14:56:48] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/1 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(1) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:00:35] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/None - error: insert or update on table "hospitalization" violates foreign key constraint "hospitalization_fk3"
DETAIL:  Key (nurse_employee_contract_service_user_user_id)=(5) is not present in table "nurse".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:00:39] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/2 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk2"
DETAIL:  Key (doctor_employee_contract_service_user_user_id)=(3) is not present in table "doctor".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:01] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:04] "POST /dbproj/surgery HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:22] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:25] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:01:35] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:rest_api:Exception on /dbproj/bills/5 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 106, in pay_bill_endpoint
    return pay_bill(bill_id)
          ^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 50, in pay_bill
    'status': StatusCodes['forbidden'],
              ~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'forbidden'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:02:10] "[35m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 500 -
ERROR:rest_api:Exception on /dbproj/bills/5 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 106, in pay_bill_endpoint
    return pay_bill(bill_id)
          ^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 50, in pay_bill
    'status': StatusCodes['forbidden'],
              ~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'forbidden'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:02:17] "[35m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:rest_api:Exception on /dbproj/bills/5 [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1486, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 170, in decorator
    return current_app.ensure_sync(fn)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/authentication.py", line 137, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/rest_api.py", line 106, in pay_bill_endpoint
    return pay_bill(bill_id)
          ^^^^^^^^^^^^^^^^^
  File "/home/nuno/Desktop/LEI/2ÂºAno/2ÂºSemestre/BD/Projeto/BD-Final-Project/stage_2/src/payment.py", line 53, in pay_bill
    'status': StatusCodes['forbidden'],
              ~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'forbidden'
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:03:16] "[35m[1mPOST /dbproj/bills/5 HTTP/1.1[0m" 500 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:09:46] "POST /dbproj/bills/5 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/5 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:11:35] "POST /dbproj/bills/5 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "bill_bill" of relation "payment" does not exist
LINE 2:                     INSERT INTO payment (bill_bill, amount, ...
                                                 ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:11:48] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: record "new" has no field "bill_id"
CONTEXT:  SQL statement "UPDATE bill
    SET already_payed = already_payed + NEW.payment
    WHERE bill_id = NEW.bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:15:24] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "bill_bill_id" does not exist
LINE 3:     WHERE bill_bill_id = NEW.bill_bill_id
                  ^
QUERY:  UPDATE bill
    SET already_payed = already_payed + NEW.payment
    WHERE bill_bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:19:46] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: record "new" has no field "payment"
CONTEXT:  SQL statement "UPDATE bill
    SET already_payed = already_payed + NEW.payment
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:20:04] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "remaining_cost" does not exist
LINE 2:                     SELECT remaining_cost 
                                   ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:20:39] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:                     SELECT (total_cost - already_paid) as re...
                                                 ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:21:35] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:                     SELECT (total_cost - already_paid) as re...
                                                 ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:22:04] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column bill.already_paid does not exist
LINE 2:                     SELECT (bill.total_cost - bill.already_p...
                                                      ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:22:09] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:     SET already_paid = already_paid + NEW.payment_id
                               ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".
QUERY:  UPDATE bill
    SET already_paid = already_paid + NEW.payment_id
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:23:08] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "already_paid" does not exist
LINE 2:     SET already_paid = already_paid + NEW.amount
                               ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".
QUERY:  UPDATE bill
    SET already_paid = already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:24:06] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:24:55] "GET / HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column bill.already_paid does not exist
LINE 2:     SET bill.already_paid = bill.already_paid + NEW.amount
                                    ^
HINT:  Perhaps you meant to reference the column "bill.already_payed".
QUERY:  UPDATE bill
    SET bill.already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:24:59] "POST /dbproj/bills/3 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/3 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:22] "POST /dbproj/bills/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'Portuguese', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:31] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'German', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'Oxford', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:37] "POST /dbproj/register/doctor HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Alice', 'nationality': 'Italian', 'phone': '614922325', 'birthday': '1980-01-01', 'email': 'nurse56@gmail.com', 'password': 'Password567', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '3'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:39] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/nurse - payload: {'name': 'Megan', 'nationality': 'Portuguese', 'phone': '789161743', 'birthday': '1980-01-01', 'email': 'nurse614@gmail.com', 'password': 'Password616', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'rank_id': '1'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:40] "POST /dbproj/register/nurse HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/assistant - payload: {'name': 'asone', 'nationality': 'German', 'phone': '123451789', 'birthday': '1980-01-01', 'email': 'asone@gmail.com', 'password': 'asone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:42] "POST /dbproj/register/assistant HTTP/1.1" 200 -
ERROR:logger:Insufficient permissions - required: assistant, actual: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:51] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'asone@gmail.com', 'password': 'asone'}
DEBUG:logger:POST /dbproj/user - user_id: 5, role: assistant
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:28:59] "PUT /dbproj/user HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/3 - error: insert or update on table "surgery" violates foreign key constraint "surgery_fk1"
DETAIL:  Key (hospitalization_hosp_id)=(3) is not present in table "hospitalization".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:08] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:17] "POST /dbproj/surgery HTTP/1.1" 200 -
ERROR:logger:POST /dbproj/surgery/3 - error: Doctor is not available on the selected date
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:20] "POST /dbproj/surgery/3 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:33] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:29:37] "POST /dbproj/surgery/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'patone@gmail.com', 'password': 'patone'}
DEBUG:logger:POST /dbproj/user - user_id: 1, role: patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:30:28] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/3 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:30:32] "POST /dbproj/bills/3 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: column "bill" of relation "bill" does not exist
LINE 2:     SET bill.already_paid = bill.already_paid + NEW.amount
                ^
QUERY:  UPDATE bill
    SET bill.already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id
CONTEXT:  PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:30:38] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:31:36] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/2 - error: Bill does not belong to the patient
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:31:41] "POST /dbproj/bills/2 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: duplicate key value violates unique constraint "payment_pkey"
DETAIL:  Key (bill_bill_id)=(1) already exists.

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:31:57] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/register/patient - payload: {'name': 'patone', 'nationality': 'German', 'phone': '111111111', 'birthday': '1980-01-01', 'email': 'patone@gmail.com', 'password': 'patone'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:34:40] "POST /dbproj/register/patient HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/doctor - payload: {'name': 'docone', 'nationality': 'French', 'phone': '222222222', 'birthday': '1980-01-01', 'email': 'docone@gmail.com', 'password': 'docone', 'contract_start_date': '2022-01-01', 'contract_end_date': '2023-01-01', 'university': 'MIT', 'graduation_date': '2005-01-01', 'specializations': ['Neurophysiology']}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:34:44] "POST /dbproj/register/doctor HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:34:54] "POST /dbproj/appointment HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 1, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:35:07] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 50, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: new row for relation "bill" violates check constraint "excessive_payment"
DETAIL:  Failing row contains (1, 50, 51).
CONTEXT:  SQL statement "UPDATE bill
    SET already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:35:20] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 50, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: new row for relation "bill" violates check constraint "excessive_payment"
DETAIL:  Failing row contains (1, 50, 51).
CONTEXT:  SQL statement "UPDATE bill
    SET already_paid = bill.already_paid + NEW.amount
    WHERE bill_id = NEW.bill_bill_id"
PL/pgSQL function update_bill_payment_trigger() line 4 at SQL statement

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:13] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 20, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:22] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 29, 'payment_method': 'mbway'}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:27] "POST /dbproj/bills/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/dbproj/bills/<int:bill_id> - payload: {'amount': 0, 'payment_method': 'mbway'}
ERROR:logger:POST /dbproj/dbproj/bills/<int:bill_id> - error: new row for relation "payment" violates check constraint "constraint_0"
DETAIL:  Failing row contains (6, 0, mbway, 1).

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:36:30] "POST /dbproj/bills/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:58:12] "[33mGET /dbproj/2 HTTP/1.1[0m" 404 -
DEBUG:logger:GET /dbproj/prescriptions/1
ERROR:logger:missing FROM-clause entry for table "p"
LINE 4:                     JOIN dose d ON p.presc_id = d.prescripti...
                                           ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:58:23] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:01] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/2
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:09] "GET /dbproj/prescriptions/2 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:13] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 15:59:54] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 3, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
ERROR:logger:POST /dbproj/prescriptions - insert or update on table "prescription_appointment" violates foreign key constraint "prescription_appointment_fk2"
DETAIL:  Key (appointment_app_id)=(3) is not present in table "appointment".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:00:00] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Aspirin', 'posology_dose': 123, 'posology_frequency': 'Morning'}, {'medicine': 'Quetiapine', 'posology_dose': 234, 'posology_frequency': 'Afternoon'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:00:05] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:00:11] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:30:49] "[31m[1mGET /dbproj/prescriptions/1 HTTP/1.1[0m" 401 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:30:58] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/user - payload: {'email': 'docone@gmail.com', 'password': 'docone'}
DEBUG:logger:POST /dbproj/user - user_id: 2, role: doctor
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:31:16] "PUT /dbproj/user HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
ERROR:logger:column p.presc_ud does not exist
LINE 11:                     GROUP BY p.presc_ud, p.validity
                                      ^
HINT:  Perhaps you meant to reference the column "p.presc_id".

INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:31:19] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
ERROR:logger:column "d.amount" must appear in the GROUP BY clause or be used in an aggregate function
LINE 2: ...SELECT p.presc_id AS prescription_id, p.validity, d.amount, ...
                                                             ^

INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:33:02] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:44:55] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:47:49] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:48:46] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:48:49] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:logger:Starting HMS server on http://127.0.0.1:8080
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:8080
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:48:53] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
DEBUG:logger:POST /dbproj/register/service_user - payload: {'type': 'appointment', 'event_id': 1, 'validity': '2014-01-02', 'medicines': [{'medicine': 'Morphine', 'posology_dose': 123, 'posology_frequency': 'Morning'}]}
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:49:32] "POST /dbproj/prescription HTTP/1.1" 200 -
DEBUG:logger:GET /dbproj/prescriptions/1
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:49:41] "GET /dbproj/prescriptions/1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [23/May/2024 16:59:13] "[33mGET /dbproj/top3 HTTP/1.1[0m" 404 -
